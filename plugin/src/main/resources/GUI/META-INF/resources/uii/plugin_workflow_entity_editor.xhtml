<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:composite="http://xmlns.jcp.org/jsf/composite"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:x="http://myfaces.apache.org/tomahawk"
    xmlns:intranda="http://xmlns.jcp.org/jsf/composite/composites"
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:p="http://primefaces.org/ui"
    xmlns:entity="http://entity.goobi.io/facelets"
    xmlns:jsf="http://xmlns.jcp.org/jsf">

    <composite:interface>
    </composite:interface>

    <composite:implementation>

        <style>
.breadcrumbs {
    display: none;
}

.grid {
    display: grid;
    grid-template-columns: 50% 50%;
    grid-template-rows: auto auto;
    grid-row-gap: 1px;
    grid-column-gap: 9px;
}

.grid .head {
    grid-column-start: span 2;
}

.head ul {
    list-style-type: none;
    float: left;
    margin: 0;
    padding: 2px 5px;
}

.head ul li {
    float: left;
    margin-right: 10px;
}

.grid .left, .grid .right {
    min-height: 300px;
}

.grid .right {
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    justify-content: space-evenly;
    align-items: stretch;
    align-content: stretch;
}

.flex {
    flex-grow: 1;
}

.breadcrumb-button {
    display: block;
    padding: 2px 6px;
    float: left;
    background: #fff;
    transform: skew(45deg);
    margin-top: 3px;
}

.breadcrumb-button i {
    margin-right: 5px;
}

.box-content {
    min-height: 250px;
}

.skew-fix {
    display: inline-block;
    transform: skew(-45deg);
    margin-left: 10px;
    margin-right: 10px;
}

.box .box-title h3 {
    color: inherit;
}

.toggle {
    background: #f6f6f6;
}

.toggle-on {
    color: green;
}
</style>

        <div class="grid">
            <div class="head">
                <h:form>
                    <ul>
                        <ui:repeat
                            var="breadcrumb"
                            value="#{NavigationForm.workflowPlugin.breadcrumbList}">
                            <li>
                                <!--                                                         <button -->
                                <!--                                                             class="btn breadcrumb-button" -->
                                <!--                                                             jsf:style="border: 1px solid #{breadcrumb.color}; color: #{breadcrumb.color}" -->
                                <!--                                                             jsf:action="#{NavigationForm.workflowPlugin.loadSelectedBreadcrumb}" -->
                                <!--                                                             > -->
                                <!--                                                             <x:updateActionListener value="#{breadcrumb}" property="#{NavigationForm.workflowPlugin.selectedBreadcrumb}" /> -->
                                <!--                                                             <span class="skew-fix"> -->
                                <!--                                                                 <i -->
                                <!--                                                                     class="fa #{breadcrumb.icon}" -->
                                <!--                                                                     jsf:rendered="#{breadcrumb.entityName != null}" /> -->
                                <!--                                                                 <h:outputText value="#{breadcrumb.entityName}" /> -->
                                <!--                                                             </span> -->
                                <!--                                                         </button> -->


                                <entity:breadcrumb
                                    entityType="#{breadcrumb.entityType}"
                                    entityName="#{breadcrumb.entityName}"
                                    entityColor="#{breadcrumb.color}"
                                    entityIcon="#{breadcrumb.icon}" />
                            </li>
                        </ui:repeat>

                    </ul>
                </h:form>
            </div>

            <div class="left">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="box box-color box-bordered #{NavigationForm.workflowPlugin.currentType.name}">
                            <div
                                class="box-title"
                                jsf:style="background: #{NavigationForm.workflowPlugin.currentType.color}; border-color: #{NavigationForm.workflowPlugin.currentType.color};">
                                <h3>
                                    <i class="fa #{NavigationForm.workflowPlugin.currentType.icon}" />

                                    <h:outputText value="#{NavigationForm.workflowPlugin.entityName}" />
                                </h3>
                            </div>
                            <div
                                class="box-content nopadding"
                                jsf:style="border-color: #{NavigationForm.workflowPlugin.currentType.color}; min-height: 600px;">

                                <h:form
                                    styleClass="form-horizontal form-bordered"
                                    prependId="false"
                                    id="metadataForm">

                                    <ui:repeat
                                        value="#{NavigationForm.workflowPlugin.metadataFieldList}"
                                        var="field"
                                        varStatus="status">

                                        <div class="form-group">
                                            <div class="col-sm-3 control-label">

                                                <h:outputLabel
                                                    for="field_#{status.index}"
                                                    value="#{msgs[field.configField.label]}" />

                                                <!--                                                 <h:panelGroup rendered="#{field.configField.required}"> -->
                                                <!--                                                     <i class="fa fa-asterisk pull-right font-asterisk margin-left-regular" /> -->
                                                <!--                                                 </h:panelGroup> -->

                                                <!--                                                 <ui:fragment rendered="#{field.searchable}"> -->
                                                <!--                                                     <h:commandLink -->
                                                <!--                                                         style="color: #666666;" -->
                                                <!--                                                         styleClass="change-icon pull-right " -->
                                                <!--                                                         title="#{msgs.search}" -->
                                                <!--                                                         action="#{AktuelleSchritteForm.myPlugin.seachField}"> -->
                                                <!--                                                         <i class="fa fa-search" /> -->
                                                <!--                                                         <f:setPropertyActionListener -->
                                                <!--                                                             value="true" -->
                                                <!--                                                             target="#{AktuelleSchritteForm.myPlugin.displaySearchPopup}" /> -->
                                                <!--                                                         <f:setPropertyActionListener -->
                                                <!--                                                             value="#{field}" -->
                                                <!--                                                             target="#{AktuelleSchritteForm.myPlugin.currentField}" /> -->
                                                <!--                                                     </h:commandLink> -->
                                                <!--                                                 </ui:fragment> -->

                                                <!--                                                 <h:commandLink -->
                                                <!--                                                     rendered="#{field.repeatable or field.deletable}" -->
                                                <!--                                                     style="color: #666666; margin-right: 5px;" -->
                                                <!--                                                     styleClass="change-icon pull-right " -->
                                                <!--                                                     title="#{msgs.remove}" -->
                                                <!--                                                     action="#{AktuelleSchritteForm.myPlugin.deleteField}"> -->
                                                <!--                                                     <i class="fa fa-minus" /> -->
                                                <!--                                                     <f:setPropertyActionListener -->
                                                <!--                                                         value="#{field}" -->
                                                <!--                                                         target="#{AktuelleSchritteForm.myPlugin.currentField}" /> -->
                                                <!--                                                 </h:commandLink> -->

                                                <!--                                                 <h:commandLink -->
                                                <!--                                                     rendered="#{field.repeatable}" -->
                                                <!--                                                     style="color: #666666; margin-right: 5px;" -->
                                                <!--                                                     styleClass="change-icon pull-right " -->
                                                <!--                                                     title="#{msgs.duplicate}" -->
                                                <!--                                                     action="#{AktuelleSchritteForm.myPlugin.duplicateField}"> -->
                                                <!--                                                     <i class="fa fa-plus" /> -->
                                                <!--                                                     <f:setPropertyActionListener -->
                                                <!--                                                         value="#{field}" -->
                                                <!--                                                         target="#{AktuelleSchritteForm.myPlugin.currentField}" /> -->
                                                <!--                                                 </h:commandLink> -->



                                                <!-- publish button -->
                                                <button
                                                    class="btn pull-right toggle"
                                                    jsf:id="toggle-export"
                                                    jsf:rendered="#{field.displayPublishButton}">
                                                    <i class="fa #{field.publishField.booleanValue == false?'fa fa-toggle-off':'fa fa-toggle-on toggle-on'}" />
                                                    <f:ajax
                                                        execute="@this"
                                                        render="@this" />

                                                    <f:setPropertyActionListener
                                                        value="#{not field.publishField.booleanValue}"
                                                        target="#{field.publishField.booleanValue}" />
                                                </button>

                                                <!-- TODO deletion button -->
                                                <!-- TODO duplicate button -->

                                            </div>

                                            <h:panelGroup
                                                layout="block"
                                                rendered="#{!field.configField.group}"
                                                styleClass="col-sm-9">

                                                <ui:fragment rendered="#{field.configField.fieldType == 'input' or field.configField.fieldType == 'generated'}">
                                                    <x:inputText
                                                        styleClass="form-control"
                                                        value="#{field.metadata.value}"
                                                        required="false"
                                                        id="field_#{status.index}"
                                                        readonly="#{field.configField.readonly  or field.configField.fieldType == 'generated'}">
                                                        <f:ajax
                                                            execute="@this"
                                                            render="@this"
                                                            event="blur" />
                                                    </x:inputText>
                                                </ui:fragment>

                                                <ui:fragment rendered="#{field.configField.fieldType == 'checkbox'}">
                                                    <h:selectBooleanCheckbox
                                                        styleClass="form-control checkbox-height-fix"
                                                        style="width: auto;"
                                                        value="#{field.booleanValue}">
                                                        <f:ajax
                                                            event="change"
                                                            render="@this" />
                                                    </h:selectBooleanCheckbox>
                                                </ui:fragment>
                                                <ui:fragment rendered="#{field.configField.fieldType == 'select'}">
                                                    <h:selectOneMenu
                                                        styleClass="form-control"
                                                        value="#{field.metadata.value}">
                                                        <f:ajax
                                                            event="change"
                                                            render="@this" />
                                                        <f:selectItem
                                                            itemValue=""
                                                            itemLabel="#{msgs.bitteAuswaehlen}"
                                                            itemDisabled="true" />
                                                        <f:selectItems
                                                            value="#{field.configField.valueList}"
                                                            var="item"
                                                            itemLabel="#{item}"
                                                            itemValue="#{item}" />
                                                    </h:selectOneMenu>
                                                </ui:fragment>

                                                <ui:fragment rendered="#{field.configField.fieldType == 'vocabularyList'}">
                                                    <h:selectOneMenu
                                                        styleClass="form-control"
                                                        value="#{field.vocabularyValue}">
                                                        <f:ajax
                                                            event="change"
                                                            render="@this" />
                                                        <f:selectItem
                                                            itemValue=""
                                                            itemLabel="#{msgs.bitteAuswaehlen}"
                                                            itemDisabled="false" />
                                                        <f:selectItems
                                                            value="#{field.configField.vocabularyList}"
                                                            var="item"
                                                            itemLabel="#{item}"
                                                            itemValue="#{item}" />
                                                    </h:selectOneMenu>
                                                </ui:fragment>

                                            </h:panelGroup>

                                            <h:panelGroup
                                                layout="block"
                                                rendered="#{field.configField.group}"
                                                styleClass="col-sm-9">
                                            list group metadata
                                            
                                            </h:panelGroup>

                                        </div>




                                    </ui:repeat>

                                </h:form>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
            <div class="right">
                <div class="row flex">
                    <div class="col-sm-6">
                        <div
                            class="box  box-bordered"
                            style="color: #df07b9">
                            <div
                                class="box-title"
                                jsf:style="border-color: #df07b9">
                                <h3>
                                    <i class="fa fa-user" />

                                    <h:outputText value="#{msgs.plugin_workflow_entity_editor_linkedArtists}" />
                                </h3>
                            </div>
                            <div
                                class="box-content"
                                jsf:style="border-color: #df07b9; height: 500px;">nothing to see</div>
                        </div>
                    </div>

                    <div class="col-sm-6">
                        <div
                            class="box  box-bordered"
                            style="color: #e81c0c">
                            <div
                                class="box-title"
                                jsf:style="border-color: #e81c0c">
                                <h3>
                                    <i class="fa fa-university" />

                                    <h:outputText value="#{msgs.plugin_workflow_entity_editor_linkedAgencies}" />
                                </h3>
                            </div>
                            <div
                                class="box-content"
                                jsf:style="border-color: #e81c0c;">nothing to see</div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div
                            class="box  box-bordered"
                            style="color: #900688">
                            <div
                                class="box-title"
                                jsf:style="border-color: #900688">
                                <h3>
                                    <i class="fa fa-picture-o" />

                                    <h:outputText value="#{msgs.plugin_workflow_entity_editor_linkedWork}" />
                                </h3>
                            </div>
                            <div
                                class="box-content"
                                jsf:style="border-color: #900688;">nothing to see</div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div
                            class="box  box-bordered"
                            style="color: #05b8cd;">
                            <div
                                class="box-title"
                                jsf:style="border-color: #05b8cd;">
                                <h3>
                                    <i class="fa fa-trophy" />

                                    <h:outputText value="#{msgs.plugin_workflow_entity_editor_linkedAwards}" />
                                </h3>
                            </div>
                            <div
                                class="box-content"
                                jsf:style="border-color: #05b8cd;">nothing to see</div>
                        </div>
                    </div>

                    <div class="col-sm-6">
                        <div
                            class="box box-bordered"
                            style="color: #19b609;">
                            <div
                                class="box-title"
                                jsf:style="border-color: #19b609;">
                                <h3>
                                    <i class="fa fa-calendar" />

                                    <h:outputText value="#{msgs.plugin_workflow_entity_editor_linkedEvents}" />
                                </h3>
                            </div>
                            <div
                                class="box-content"
                                jsf:style="border-color: #19b609;">nothing to see</div>
                        </div>
                    </div>
                </div>

            </div>


        </div>



    </composite:implementation>
</ui:composition>